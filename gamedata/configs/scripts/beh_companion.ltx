[logic]
active = beh@base
on_combat = combat
post_combat_time = 0,0

[beh@base]
combat_ignore_keep_when_attacked = true
combat_ignore_cond = {=check_enemy_name(actor)} true, {-npcx_beh_ignore_combat -npcx_beh_ignore_actor_enemies}  false, {+npcx_beh_ignore_combat +npcx_beh_ignore_actor_enemies} true, {+npcx_beh_ignore_combat -npcx_beh_ignore_actor_enemies =is_enemy_fighting_actor} false, true
meet = meet
gather_items_enabled = {+npcx_beh_gather_items}true, false
corpse_detection_enabled = {+npcx_beh_loot_corpses} true, false
actor_dialogs = actor_dialogs
on_combat = combat
behavior_state = {+npcx_beh_wait} beh_wait, beh_move
target = {!is_squad_commander} commander, {=is_squad_commander +npcx_beh_patrol_mode} waypoint, actor
walk_dist = {+npcx_beh_patrol_mode} 90, 5
jog_dist = {+npcx_beh_patrol_mode} 150, 15
run_dist = {+npcx_beh_patrol_mode} 250, {-npcx_beh_patrol_mode +npcx_beh_substate_stealth} 40, 30
keep_distance = {+npcx_beh_distance_far} far, near
near_desired_dist = {+npcx_beh_patrol_mode =is_squad_commander} 1, {!is_squad_commander} 4, 2
far_desired_dist = {+npcx_beh_patrol_mode =is_squad_commander} 1, {!is_squad_commander} 4, 8
wait_anim = {=is_wounded} nil, {+npcx_beh_substate_stealth} hide, guard
walk_anim = {=is_wounded} nil, {+npcx_beh_patrol_mode -npcx_beh_substate_stealth} patrol,{+npcx_beh_substate_stealth} sneak, patrol
jog_anim = {=is_wounded} nil, {+npcx_beh_substate_stealth} sneak_run, rush
run_anim = {=is_wounded} nil, {+npcx_beh_substate_stealth} assault, assault
sprint_anim = {=is_wounded} nil, {+npcx_beh_substate_stealth} sprint, sprint
delay_anim = {=is_wounded} nil, {+npcx_beh_substate_stealth} hide, random_animation

out_restr = {=actor_in_zone(zat_a2_sr_noweap)} zat_a2_sr_noweap, {=actor_in_zone(jup_a6_sr_noweap)} jup_a6_sr_noweap, {=actor_in_zone(jup_b41_sr_noweap)} jup_b41_sr_noweap
;in_restr = {=actor_in_zone(zat_a2_sr_noweap)} zat_a2_sr_light

;on_info = {=actor_in_zone(zat_a2_sr_noweap) +npcx_beh_wait =companion_at_index(1)} beh@zat_stalker_base_1, {=actor_in_zone(zat_a2_sr_noweap) +npcx_beh_wait =companion_at_index(2)} beh@zat_stalker_base_2, {=actor_in_zone(zat_a2_sr_noweap) +npcx_beh_wait =companion_at_index(3)} beh@zat_stalker_base_3

[combat]
combat_type = {+npcx_beh_combat_tactics_camper} camper, {+npcx_beh_combat_tactics_smart} monolith

[meet]
reset_distance = 2
abuse = false
close_anim = nil ;{+npcx_beh_substate_stealth -npcx_beh_substate_relax} hide, guard_na
far_anim = nil
snd_on_use = nil
close_snd_hello = nil
close_snd_bye = nil
far_snd_hello = nil
far_snd_bye = nil
use = {=is_wounded} nil, {!is_squad_commander} false

[actor_dialogs]
disable = dm_traveler_dialog, dm_actor_become_guide_to_companion_dialog, dm_universal_dialog, about_quests_dialog_dolg, about_quests_dialog_freedom, about_quests_dialog_bandit, about_quests_dialog_stalkers


[beh@general]
sound_idle = state
behavior_state = beh_move
target = waypoint
walk_dist = 100
jog_dist = 220
wait_anim = guard
walk_anim = patrol
jog_anim = patrol
run_anim = rush
delay_anim = guard
meet = meet
combat_ignore_cond = true
combat_ignore_keep_when_attacked = true
gather_items_enabled = false
help_wounded_enabled = false
corpse_detection_enabled = false
use_camp = true

;--------------------------------------------------zat_stalker_base_smart
[beh@zat_stalker_base_1]:beh@general
out_restr = zat_a2_sr_noweap
pt1 = 1186455,360000,animpoint_stay_table animpoint:128.11792602539,-7.339723110199,185.22194824219,1,0,0
path_end = loop
on_info = {-npcx_beh_wait} beh@base

[beh@zat_stalker_base_2]:beh@general
out_restr = zat_a2_sr_noweap
pt1 = 1160053,360000,animpoint_sit_low animpoint:113,-4,189,1,0,0
path_end = loop
on_info = {-npcx_beh_wait} beh@base

[beh@zat_stalker_base_3]:beh@general
out_restr = zat_a2_sr_noweap
pt1 = 1173964,360000,animpoint_stay_table animpoint:122.6,-7,188.8,0,0,-1
path_end = loop
on_info = {-npcx_beh_wait} beh@base
